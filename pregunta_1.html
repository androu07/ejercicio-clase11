<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Registro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

</head>
<body>
    <div style="display: flex;">
        <div class="container" style="margin-top: 5vh; width: 30%; justify-content: center; align-items: center;text-align: center; display: flex;">
            <div>
                <h2 style="font-weight: bold;">Connect with friends and the<br>world around you on Facebook</h1>
                <div style="display: flex; margin-bottom: 2vh;">
                    <img src="icononoticia.jpg" alt="img" width="50" height="50">
                    <div style="flex-direction: column; margin-left: 8vh;">
                        <p style="font-weight: bold; font-size: large; margin: 0;">See photos and updates</p>
                        <p style="margin: 0;">from friends in News Feed</p>
                    </div>
                </div>
                <div style="display: flex; margin-bottom: 2vh;">
                    <img src="FACEBOOK_MESSENGER.png" alt="img" width="50" height="50">
                    <div style="flex-direction: column; margin-left: 8vh;">
                        <p style="font-weight: bold; font-size: large; margin: 0;">Share what's new in your</p>
                        <p style="margin: 0;">life on your Timeline</p>
                    </div>
                </div>
                <div style="display: flex;">
                    <img src="compu.JPG" alt="img" width="50" height="50">
                    <div style="flex-direction: column; margin-left: 8vh;">
                        <p style="font-weight: bold; font-size: large; margin: 0;">Find more of what you're looking</p>
                        <p style="margin: 0;">for with Graph Search</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="container" style="margin-top: 5vh; width: 50%;">
            <h1>Sign up!</h1>
            <h7>Es gratis y lo será siempre.</h7>
            <br>
            <br>
            <div>

            </div>
            <form action="pregunta_1.html" class="row g-3" method="post" id="formulario">
                <div style="display: flex;">
                    <div style="width: 49%; flex-direction: column;">
                        <div style="display: flex; margin-right: 2vh;">
                            <input style="margin-right: 1vh;" type="text" class="form-control" id="nombre" placeholder="Nombre">
                            <svg xmlns="http://www.w3.org/2000/svg" style="display: none;" id="validNombre"  width="30" height="30" fill="currentColor" class="bi bi-check2" viewBox="0 0 16 16">
                                <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0"/>
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" id="invalidNombre" style="display: none;" width="30" height="30" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                                <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
                            </svg>
                        </div>
                        <div id="errorNombre" style="color: red;"></div>
                    </div>
                    <div style="width: 49%;">
                        <div style="display: flex; margin-right: 2vh;">
                            <input style="margin-right: 1vh;" type="text" class="form-control" id="apellido" placeholder="Apellido">
                            <svg xmlns="http://www.w3.org/2000/svg" style="display: none;" id="validApellido"  width="30" height="30" fill="currentColor" class="bi bi-check2" viewBox="0 0 16 16">
                                <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0"/>
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" id="invalidApellido" style="display: none;" width="30" height="30" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                                <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
                            </svg>
                        </div>
                        <div id="errorApellido" style="color: red;"></div>
                    </div>
                </div>
                <div>
                    <div style="margin-bottom: 2vh;">
                        <div style="display: flex;">
                            <input type="email" class="form-control" id="email" placeholder="Email">
                            <svg xmlns="http://www.w3.org/2000/svg" style="display: none;" id="validEmail"  width="30" height="30" fill="currentColor" class="bi bi-check2" viewBox="0 0 16 16">
                                <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0"/>
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" id="invalidEmail" style="display: none;" width="30" height="30" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                                <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
                            </svg>
                        </div>
                        <div id="errorEmail" style="color: red;"></div>
                    </div>
                    <div>
                        <div style="display: flex;">
                            <input type="email" class="form-control" id="emailConfirmacion" placeholder="Vuelve a ingresar el correo electrónico">
                            <svg xmlns="http://www.w3.org/2000/svg" style="display: none;" id="validEmailConf"  width="30" height="30" fill="currentColor" class="bi bi-check2" viewBox="0 0 16 16">
                                <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0"/>
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" id="invalidEmailConf" style="display: none;" width="30" height="30" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                                <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
                            </svg>
                        </div>
                        <div id="errorConfirmacion" style="color: red;"></div>
                    </div>
                </div>
                <div >
                    <div style="display: flex;">
                        <input type="password" id="password" class="form-control" aria-describedby="passwordHelpBlock" placeholder="Password">
                        <svg xmlns="http://www.w3.org/2000/svg" style="display: none;" id="validPassword"  width="30" height="30" fill="currentColor" class="bi bi-check2" viewBox="0 0 16 16">
                            <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0"/>
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" id="invalidPassword" style="display: none;" width="30" height="30" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                            <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
                        </svg>
                    </div>
                    <div id="errorPassword" style="color: red;"></div>
                </div>
                <div>
                    <label for="fecha class="form-label" style="font-weight: bold;">Fecha de nacimiento</label>
                    <input type="date" class="form-control" id="fecha" placeholder="mm/dd/aaaa">
                    <div id="errorFecha" style="color: red;"></div>
                </div>
                <div class="mb-3">
                    <button type="submit" class="btn btn-success">Abrir cuenta</button>
                </div>
            </form>
            <br><br>
            <h4>Usuarios agregados</h4>
            <h5 id="cantidadUsuarios">0</h5>
            <br><br>
            <table class="table table-dark table-striped-columns">
                <thead>
                    <tr>
                    <th scope="col">Nombre Completo</th>
                    <th scope="col">Email</th>
                    <th scope="col">Fecha de Nacimiento</th>
                    <th scope="col">Eliminar</th>
                    </tr>
                </thead>
                <tbody id="usuariosAgregados">
                </tbody>
            </table>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>    
    <script>
        function tieneConsecutivos(password) {
            for (let i = 0; i < password.length - 1; i++) {
                if (password.charCodeAt(i + 1) === password.charCodeAt(i) + 1) {
                    return true;
                }
            }
            return false;
        }

        function actualizarCantidad() {
            var cuenta = $("#usuariosAgregados tr").length;
            $("#cantidadUsuarios").text(cuenta);
        }

        $(document).on("click", ".btn-quitar", function(event) {
            event.preventDefault();
            $(this).closest("tr").remove();
            actualizarCantidad();
        });

        $("form").submit(function(event) {
            event.preventDefault();

            var nombre = $("#nombre").val();
            var nombreValidado = 0;

            var apellido = $("#apellido").val();
            var apellidoValidado = 0;

            var email = $("#email").val();
            var emailValidado = 0;

            var emailConfirmacion = $("#emailConfirmacion").val();
            var emailConfirmacionValidado = 0;

            var password = $("#password").val();
            var passwordValidado = 0;

            var fecha = $("#fecha").val();
            var fechaValidado = 0;

            if (nombre != "") {
                if (!/^[a-zA-Z\u00C0-\u017F\s]+$/.test(nombre)) {
                    document.getElementById("errorNombre").innerHTML = "<div></div>";
                    document.getElementById("invalidNombre").style.display="block";
                    document.getElementById("validNombre").style.display="none";
                } else {
                    document.getElementById("errorNombre").innerHTML = "<div></div>";
                    document.getElementById("invalidNombre").style.display="none";
                    document.getElementById("validNombre").style.display="block";
                    nombreValidado = 1;
                }
            } else {
                document.getElementById("invalidNombre").style.display="none";
                document.getElementById("errorNombre").innerHTML = "<div>Campo faltante</div>";
            }

            if (apellido != "") {
                if (!/^[a-zA-Z\u00C0-\u017F\s]+$/.test(apellido)) {
                    document.getElementById("errorApellido").innerHTML = "<div></div>";
                    document.getElementById("invalidApellido").style.display="block";
                    document.getElementById("validApellido").style.display="none";
                } else {
                    document.getElementById("errorApellido").innerHTML = "<div></div>";
                    document.getElementById("invalidApellido").style.display="none";
                    document.getElementById("validApellido").style.display="block";
                    apellidoValidado = 1;
                }
            } else {
                document.getElementById("invalidApellido").style.display="none";
                document.getElementById("errorApellido").innerHTML = "<div>Campo faltante</div>";
            }

            if (email != "") {
                if (!/^[^\s@]+@[^\s@]+\.(com)$/i.test(email)) {
                    document.getElementById("invalidEmail").style.display="block";
                    document.getElementById("errorEmail").innerHTML = "<div>El email debe seguir la siguiente estructura: aaa@aaa.com</div>";
                    document.getElementById("validEmail").style.display="none";
                } else {
                    document.getElementById("invalidEmail").style.display="none";
                    document.getElementById("errorEmail").innerHTML = "<div></div>";
                    document.getElementById("validEmail").style.display="block";
                    emailValidado = 1;
                }
            } else {
                document.getElementById("errorEmail").innerHTML = "<div>Campo faltante</div>";
                document.getElementById("invalidEmail").style.display="none";
            }

            if (emailConfirmacion != "") {
                if (emailConfirmacion != email) {
                    document.getElementById("invalidEmailConf").style.display="block";
                    document.getElementById("errorConfirmacion").innerHTML = "<div></div>";
                    document.getElementById("validEmailConf").style.display="none";
                } else {
                    document.getElementById("invalidEmailConf").style.display="none";
                    document.getElementById("errorConfirmacion").innerHTML = "<div></div>";
                    document.getElementById("validEmailConf").style.display="block";
                    emailConfirmacionValidado = 1;
                }
            } else {
                document.getElementById("errorConfirmacion").innerHTML = "<div>Campo faltante</div>";
                document.getElementById("invalidEmailConf").style.display="none";
            }

            if (password != "") {
                if (/^(?=.*[A-Z])(?=.*[!@#$%^&*])(?=.{6,})/.test(password) && !tieneConsecutivos(password)) {
                    document.getElementById("invalidPassword").style.display = "none";
                    document.getElementById("errorPassword").innerHTML = "<div></div>";
                    document.getElementById("validPassword").style.display = "block";
                    passwordValidado = 1;
                } else {
                    document.getElementById("invalidPassword").style.display = "block";
                    document.getElementById("validPassword").style.display = "none";
                    document.getElementById("errorPassword").innerHTML = "<div></div>";
                }
            } else {
                document.getElementById("errorPassword").innerHTML = "<div>Campo faltante</div>";
                document.getElementById("invalidPassword").style.display="none";
            }

            if (fecha != "") {
                fechaValidado = 1;
            } else {
                document.getElementById("errorFecha").innerHTML = "<div>Campo faltante</div>";
            }

            if(nombreValidado == 1 && apellidoValidado == 1 && emailValidado == 1 && emailConfirmacionValidado == 1 && fechaValidado == 1 && passwordValidado == 1){
                $("#usuariosAgregados").append($("<tr>").append($("<td></td>").text($("#nombre").val() + ' ' + $("#apellido").val())).append($("<td></td>").text($("#email").val())).append($("<td></td>").text($("#fecha").val())).append($('<td> <button class="btn btn-danger btn-quitar">Quitar</button> </td>')));
                $("#usuariosAgregados").append($("</tr>"));
                actualizarCantidad();
                $("#formulario")[0].reset();
                document.getElementById("validNombre").style.display="none";
                document.getElementById("validApellido").style.display="none";
                document.getElementById("validEmail").style.display="none";
                document.getElementById("validEmailConf").style.display="none";
                document.getElementById("validPassword").style.display = "none";
                document.getElementById("errorFecha").innerHTML = "<div></div>";
            }

        });
    </script>

</body>
</html>